<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title>청첩장 수정 페이지</title>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100&display=swap" rel="stylesheet">

    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
        }

        body {
            /*background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://nhim.splf.in/nhim/MessageCard/MsgWedding00.png');*/
            background-position: center;
            background-size: cover;
        }

        .main_title {
            /*background-color: red;*/
            margin: 20px auto 20px auto;
            text-align: center;
        }

        .wedding-info {
            width: 95%;
            max-width: 630px;
            margin: 20px auto 0px auto;
            padding: 20px;
            box-shadow: 0px 0px 3px 0px gray;
        }

        .mybtn {
            padding-top: 20px;
        }

        .mybtn > button {
            margin-right: 10px;
        }

        .input-group {
            margin-top: 10px;
        }
    </style>
    <script>
        $(document).ready(function () {
            showInvitation();
        });

        function showInvitation(){
            $.ajax({
                type: "GET",
                url: "/showInvitation",
                data: {},
                success: function (response) {
                    rows = response['wedding']
                    console.log(response)
                    for(let i = 0; i <rows.length; i++) {
                    let manName = rows[i]['manName']
                    let girlName = rows[i]['girlName']
                    let manTel = rows[i]['manTel']
                    let girlTel = rows[i]['girlTel']
                    let weddingDay = rows[i]['weddingDay']
                    let weddingPlace = rows[i]['weddingPlace']
                    let comment = rows[i]['comment']
                    let manMom = rows[i]['manMom']
                    let manDad = rows[i]['manDad']
                    let girlMom = rows[i]['girlMom']
                    let girlDad = rows[i]['girlDad']
                    let manAccount = rows[i]['manAccount']
                    let girlAccount = rows[i]['girlAccount']
                    let num =rows[i]['num']
                    let temp_html = `<div class="row mb-3">
                                        <label for="manName" class="col-sm-2 col-form-label">신랑 성함</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="manName" placeholder="" value="${manName}">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="girlName" class="col-sm-2 col-form-label">신부 성함</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="girlName" placeholder="" value="${girlName}">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="manTel" class="col-sm-2 col-form-label">신랑 연락처</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="manTel" placeholder="010-0000-0000" value="${manTel}">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label for="girlTel" class="col-sm-2 col-form-label">신부 연락처</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="girlTel" placeholder="010-0000-0000" value="${girlTel}">
                                        </div>
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">결혼 날짜</span>
                                        <input id="weddingDay" type="text" class="form-control" placeholder="예시) 2023년 5월 25일 목요일 오후 1시 30분" value="${weddingDay}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">결혼 식장 정보</span>
                                        <input id="weddingPlace" type="text" class="form-control" placeholder="예시) 에펠가모 광화문 B2 료스타뇨홀" value="${weddingPlace}">
                                    </div>
                                    <div class="mb-3">
                                        <label for="comment" class="form-label">인사말</label>
                                        <textarea class="form-control" id="comment" rows="3" placeholder="예시) 살랑이는 바람결에 사랑이 묻어나는 계절입니다.
여기 곱게 예쁜 두 사람이 사랑을 맺어 인생의 반려자가 되려 합니다.
새 인생을 시작하는 이 자리에 오셔서 축복해 주시면 감사하겠습니다." value="${comment}"></textarea>
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신랑 아버님 성함</span>
                                        <input id="manDad" type="text" class="form-control" value="${manDad}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신랑 어머님 성함</span>
                                        <input id="manMom" type="text" class="form-control" value="${manMom}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신부 아버님 성함</span>
                                        <input id="girlDad" type="text" class="form-control" value="${girlDad}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신부 어머님 성함</span>
                                        <input id="girlMom" type="text" class="form-control" value="${girlMom}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신랑 계좌번호</span>
                                        <input id="manAccount" type="text" class="form-control" value="${manAccount}">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">신부 계좌번호</span>
                                        <input id="girlAccount" type="text" class="form-control" value="${girlAccount}">
                                    </div>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="inputGroupFile01" aria-describedby="inputGroupFileAddon04"
                                               aria-label="Upload">
                                    </div>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="inputGroupFile02" aria-describedby="inputGroupFileAddon04"
                                               aria-label="Upload">
                                    </div>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="inputGroupFile03" aria-describedby="inputGroupFileAddon04"
                                               aria-label="Upload">
                                    </div>
                                    <div class="mybtn">

                                    <button onclick="saveInvitation(${num})" type="button" ><a href="/myPage" class="btn btn-lg btn-primary">완료</a></button>
                                    <button onclick="moveMyPage()" type="button" class="btn btn-lg btn-primary">취소</button>
                                    </div>
                                    `
                                  $('#wedding_info').append(temp_html)

                    }
                }
            })
        }
        function saveInvitation(num){
            $.ajax({
            type: "POST",
            url: "/modify/cancel",
            data: {num_give:num,manName_give:manName,girlName_give:girlName,manTel_give:manTel,girlTel_give:girlTel,weddingDay_give:weddingDay,weddingPlace_give:weddingPlace,comment_give:comment,
              manMom_give:manMom,manDad_give:manDad
              ,girlDad_give:girlDad,manAccount_give:manAccount,girlAccount_give:girlAccount
              },
            success: function (response) {
                alert(response["msg"])
                window.location.reload()
                }
            });
        }


    </script>
</head>
<body>
    <div class="wedding">
        <h1 class="main_title">청첩장 작성 페이지</h1>

        <form class="wedding-info" id="wedding_info">
        </form>
    </div>
</div>
</body>
</html>